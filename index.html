<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Tier-Benennungsspiel</title>
  <style>
    #spielbereich, #levelauswahl {
      display: none;
    }
    .buchstabe-slot {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 1px solid #ccc;
      margin: 5px;
      text-align: center;
      line-height: 40px;
      font-size: 24px;
      background-color: #f0f0f0;
    }
    .buchstabenbank .buchstabe {
      display: inline-block;
      margin: 5px;
      padding: 10px;
      background-color: #ddd;
      cursor: grab;
    }
  </style>
</head>
<body>

<div id="startseite">
  <h1>üêæ Tier-Benennungsspiel üêæ</h1>
  <button onclick="zeigeLevelAuswahl()">Start</button>
</div>

<div id="levelauswahl">
  <h2>W√§hle ein Level</h2>
  <button onclick="levelStarten('leicht')">Leicht</button>
  <button onclick="levelStarten('mittel')">Mittel</button>
  <button onclick="levelStarten('schwer')">Schwer</button>
  <br><br>
  </div>
 <div>
  <button class="zurueck-button" onclick="zeigeStartseite()">üîô Zur√ºck zur Startseite</button>
</div>

<div id="spielbereich">
  <img id="tierbild" src="" alt="Tierbild" width="200"><br>
  <div id="wortfeld"></div>
  <div class="buchstabenbank"></div>
  <br>
  <button onclick="naechstesLevel()">N√§chstes Tier</button>
  <button onclick="resetLevel()">Zur√ºcksetzen</button>
</div>

<script>
const levelTiere = {
  leicht: [
    { datei: "katze.jpg", name: "KATZE" },
    { datei: "hund.jpg", name: "HUND" },
    { datei: "fuchs.jpg", name: "FUCHS" },
    { datei: "Wolf.jpg", name: "WOLF" },
    { datei: "Schwan.jpg", name: "SCHWAN" },
    { datei: "Hirsch.jpg", name: "HIRSCH" },
  ],
  mittel: [
    { datei: "elefant.jpg", name: "ELEFANT" },
    { datei: "giraffe.jpg", name: "GIRAFFE" },
    { datei: "hirsch.jpg", name: "HIRSCH" },
    { datei: "Delfin.jpg", name: "DELFIN" },
    { datei: "Zebra.jpg", name: "ZEBRA" },
  ],
  schwer: [
    { datei: "erdm√§nnchen.jpg", name: "ERDM√ÑNNCHEN" },
    { datei: "eichh√∂rnchen.jpg", name: "EICHH√ñRNCHEN" },
    { datei: "nashorn.jpg", name: "NASHORN" },
    { datei: "elefant.jpg", name: "ELEFANT" },
  ]
};

let aktuellesLevel = 0;
let ausgewaehlteTiere = [];

function zeigeLevelAuswahl() {
  document.getElementById("startseite").style.display = "none";
  document.getElementById("levelauswahl").style.display = "block";
}

function zeigeStartseite() {
  document.getElementById("levelauswahl").style.display = "none";
  document.getElementById("spielbereich").style.display = "none";
  document.getElementById("startseite").style.display = "block";
}

function levelStarten(levelName) {
  ausgewaehlteTiere = levelTiere[levelName];
  aktuellesLevel = 0;
  document.getElementById("levelauswahl").style.display = "none";
  document.getElementById("spielbereich").style.display = "block";
  erstelleLevel(ausgewaehlteTiere[aktuellesLevel]);
}

function erstelleLevel(tier) {
  const name = tier.name.toUpperCase();
  const bild = tier.datei;

  document.getElementById("tierbild").src = "bilder/" + bild;

  const wortfeld = document.getElementById("wortfeld");
  wortfeld.innerHTML = "";

  for (let i = 0; i < name.length; i++) {
    const slot = document.createElement("div");
    slot.className = "buchstabe-slot";
    if (i === 0) {
      slot.innerText = name[0];
    } else {
      slot.ondrop = drop;
      slot.ondragover = allowDrop;
    }
    wortfeld.appendChild(slot);
  }

  const buchstabenbank = document.querySelector(".buchstabenbank");
  buchstabenbank.innerHTML = "";

  const richtige = name.slice(1).split("");
  const falsche = ["X", "Q", "W", "B", "M", "L", "O", "U"];
  const gemischt = mischeArray([...richtige, ...falsche.slice(0, richtige.length)]);

  gemischt.forEach((buchstabe, index) => {
    const div = document.createElement("div");
    div.className = "buchstabe";
    div.innerText = buchstabe;
    div.draggable = true;
    div.id = "buchstabe" + index;
    div.ondragstart = drag;
    buchstabenbank.appendChild(div);
  });
}

function mischeArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  const draggedId = ev.dataTransfer.getData("text");
  const draggedElement = document.getElementById(draggedId);
  if (!draggedElement) return;

  const zielSlot = ev.target;

  const vorhandenerBuchstabe = zielSlot.innerText.trim();
  if (vorhandenerBuchstabe !== "") {
    const zur√ºckElement = Array.from(document.querySelectorAll(".buchstabe"))
      .find(el => el.innerText === vorhandenerBuchstabe && el.style.visibility === "hidden");
    if (zur√ºckElement) {
      zur√ºckElement.style.visibility = "visible";
    }
  }

  zielSlot.innerText = draggedElement.innerText;
  draggedElement.style.visibility = "hidden";

  checkWord();
}

function checkWord() {
  const slots = document.querySelectorAll('.buchstabe-slot');
  const name = ausgewaehlteTiere[aktuellesLevel].name.toUpperCase();

  slots.forEach((slot, index) => {
    const buchstabe = slot.innerText.trim();
    if (index < name.length) {
      if (buchstabe === name[index]) {
        slot.style.backgroundColor = "#90ee90";
      } else if (buchstabe !== "") {
        slot.style.backgroundColor = "#ffcccb";
      } else {
        slot.style.backgroundColor = "#f0f0f0";
      }
    }
  });
}

function resetLevel() {
  const slots = document.querySelectorAll('.buchstabe-slot');
  slots.forEach((slot, index) => {
    if (index > 0) {
      slot.innerText = "";
      slot.style.backgroundColor = "#f0f0f0";
    }
  });
  const buchstaben = document.querySelectorAll('.buchstabe');
  buchstaben.forEach(b => b.style.visibility = "visible");
}

function naechstesLevel() {
  aktuellesLevel++;
  if (aktuellesLevel >= ausgewaehlteTiere.length) {
    aktuellesLevel = 0;
  }
  erstelleLevel(ausgewaehlteTiere[aktuellesLevel]);
}
</script>

</body>
</html>
